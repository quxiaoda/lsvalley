webpackJsonp([1],{ASHy:function(t,e){},LOo0:function(t,e){},MCYK:function(t,e){},NHnr:function(t,e,i){"use strict";function n(t){var e=new RegExp("[?&]"+encodeURIComponent(t)+"\\=([^&#]+)"),i=(location.search.match(e)||["",""])[1];return decodeURIComponent(i)}Object.defineProperty(e,"__esModule",{value:!0});var s=i("/5sW"),o=i("NYxO"),a=window.location.href;location.protocol,a.substr(0,a.indexOf(".com")+4);s.a.use(o.a);var c={isError:!1,isFetching:!0,gizwitsws:null,GizwitsWS:window.GizwitsWS,apiHost:n("apiHost"),commType:n("commType"),wechatOpenId:n("oid"),gizwitsAppId:n("gizwitsAppId"),deviceList:[],rtTime:null,totalTime:null,curDid:null,pm25:0,air_quality_target:0,controlInfo:{status:{curKey:1},model:{curKey:0},speed:{curKey:1},time:{curKey:30}}},l={startFetching:function(t){t.isFetching=!0},endFetching:function(t,e){t.isFetching=!1,e&&(t.isError=!0)},setGizwitsws:function(t,e){t.gizwitsws=e},setStatus:function(t,e){t.controlInfo.status.curKey=e},setModel:function(t,e){t.controlInfo.model.curKey=e},setSpeed:function(t,e){t.controlInfo.speed.curKey=e},setTime:function(t,e){t.controlInfo.time.curKey=e},setDeviceList:function(t,e){t.deviceList=e||[]},setCurDid:function(t,e){t.curDid=e},setPm25:function(t,e){t.pm25=e},setRtTime:function(t,e){var i=e+"%";t.rtTime=i},setTotalTime:function(t,e){var i=parseInt(e/60)+"小时"+e%60+"分钟";t.totalTime=i},setAirTarget:function(t,e){t.air_quality_target=e}},r={curDeviceInfo:function(t){var e=t.deviceList,i=t.curDid,n=null,s=e.filter(function(t){return t.did==i});try{n=s[0]}catch(t){console.log("数据筛选失败")}return n}},u=new o.a.Store({state:c,getters:r,actions:{},mutations:l}),d=(i("uIYl"),i("jcZh"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",[e("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:this.$route.meta.title,expression:"$route.meta.title"}]})],1)],1)},staticRenderFns:[]}),m=i("VU/8")({name:"main",data:function(){return{}}},d,!1,null,null,null).exports,v=i("/ocq"),h=i("mvHQ"),p=i.n(h),f=i("pFYg"),g=i.n(f),w=i("Dd8w"),y=i.n(w),C=(i("ASHy"),i("7t+N")),b=i.n(C);window.$=b.a,window.jQuery=b.a;var x=b.a,k=new s.a,S=(i("sJGt"),{name:"loading",props:{visible:{type:Boolean,required:!0}}}),I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading_box"},[e("span",{staticClass:"loading",class:{hide:!this.visible}},[e("i",{staticClass:"icon_load"}),this._v("\n        加载中......\n    ")]),this._v(" "),this._t("default")],2)},staticRenderFns:[]},D=i("VU/8")(S,I,!1,null,null,null).exports,O=(i("LOo0"),{name:"toast",data:function(){return{visible:!1}},props:{text:String,position:{type:String,default:"middle"}},computed:{customClass:function(){return"toast-in-"+this.position}},methods:{afterLeave:function(){document.getElementById("app").removeChild(this.$el)}}}),T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"toast-fade"},on:{"after-leave":this.afterLeave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"zheui-toast",class:this.customClass},[this._v("\n        "+this._s(this.text)+"\n    ")])])},staticRenderFns:[]},L=i("VU/8")(O,T,!1,null,null,null).exports,F=s.a.extend(L),R=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(){var t=t||new F({el:document.createElement("div")});return t}(),n=e.delay||3e3,o=e.position||"";i.text=t,o&&(i.position=o),document.getElementById("app").appendChild(i.$el),s.a.nextTick(function(){i.visible=!0,clearTimeout(i.timeouter),i.timeouter=setTimeout(function(){i.visible=!1},n)})},N={name:"main-info",data:function(){return{zjy_devices:[],wx_devices:[],deviceAttr:null,onlineStatus:{},did:"",command:"",isWxReady:!1,isUnfold:{0:!1,1:!1,2:!1,3:!1},city_pm2_5:0,city:""}},watch:{curDid:function(t,e){t&&this.getLocalInfo(t),e&&t&&t!=e&&this.read(t)}},computed:y()({},Object(o.d)(["isError","isFetching","gizwitsws","GizwitsWS","apiHost","commType","wechatOpenId","gizwitsAppId","curDid","controlInfo","pm25"]),{modelDes:function(){switch(this.controlInfo.model.curKey){case 0:return"智能";case 1:return"手动";case 2:return"夜间"}}},Object(o.b)(["curDeviceInfo"]),{air_level:function(){var t=this.pm25;return t<50?"good":t>=50&&t<100?"well":t>=100&&t<200?"middle":"bad"},showLoading:function(){return console.log(g()(this.city_pm2_5),this.city_pm2_5),!this.city_pm2_5}}),components:{Loading:D},methods:{jumpFn:function(t){t||R("暂未开放此模块，敬请期待！"),this.$router.push({name:t})},newObj:function(){var t=new this.GizwitsWS(this.apiHost,this.wechatOpenId,this.gizwitsAppId,this.commType);t.onInit=this.onInit,t.onConnected=this.onConnected,t.onOnlineStatusChanged=this.onOnlineStatusChanged,t.onReceivedRaw=this.onReceivedRaw,t.onReceivedAttrs=this.onReceivedAttrs,this.$store.commit("setGizwitsws",t),console.info("初始化对象成功!")},initWx:function(){var t=this;console.log(111),x.ajax({url:"/LSVServer/getWXConfig",type:"POST",data:{url:window.location.href},success:function(e){console.log(e),"0"==(e=JSON.parse(e)).code&&(wx.config({beta:!0,appId:e.data.appId,signature:e.data.signature,nonceStr:e.data.nonce,timestamp:e.data.timestamp,jsApiList:["scanQRCode","getWXDeviceTicket","openWXDeviceLib"]}),wx.ready(function(){t.isWxReady=!0,console.log("wx ready"),wx.invoke("openWXDeviceLib",{},function(t){})}),wx.error(function(t){console.log(t)}))}})},init:function(){this.newObj(),this.gizwitsws.init(),console.info("已发送init指令!")},onInit:function(t){console.log("======onInit====="),console.log("机智云列表 => ",p()(t)),this.zjy_devices=t||[],this.getWxDeviceList()},getWxDeviceList:function(){var t=this;console.log("=====获取微信列表====="),x.ajax({url:"/LSVServer/deviceList",data:{user:t.wechatOpenId}}).done(function(e){e=JSON.parse(e),console.log(p()(e)),0==e.code?(console.log("微信列表 => ",p()(e.data)),t.wx_devices=e.data||[],t.getFinalList(e.defaultDid)):R(e.message||"接口出错了~~")}).fail(function(e){console.log(e),R(e.message||"接口出错了~~"),t.$store.commit("endFetching",!0)})},getFinalList:function(t){var e=this,i=e.zjy_devices.filter(function(t,i){return e.wx_devices.some(function(e,i){var n=String(e.deviceId).toLowerCase()==String(t.mac).toLowerCase();return n&&_.merge(t,e),n})});e.$store.commit("setDeviceList",i),e.$store.commit("setCurDid",t||(i[0]?i[0].did:"")),e.connect(e.curDid)},connect:function(t){this.gizwitsws.connect(t),console.info("已发送connect指令!")},onConnected:function(t){console.info("与设备"+t+"连接成功"),this.read(t)},read:function(t){this.gizwitsws.read(t),console.info("已发送read指令!")},onOnlineStatusChanged:function(t){this.onlineStatus=t,console.log("onlineStatus==",this.onlineStatus)},onReceivedRaw:function(t){console.log("onReceivedRaw======="+t)},onReceivedAttrs:function(t){this.deviceAttr=t.attrs,console.log(t);var e="收到设备"+t.did+"的Attrs: ";for(var i in t.attrs){e=e+i+":"+t.attrs[i]+"; ";var n=t.attrs[i];switch(i){case"power_status":this.$store.commit("setStatus",n);break;case"op_mode":this.$store.commit("setModel",n);break;case"air_quality_target":this.$store.commit("setAirTarget",n);break;case"wind_vol":this.$store.commit("setSpeed",n);break;case"left_time":this.$store.commit("setTime",n);break;case"total_time":this.$store.commit("setTotalTime",n);break;case"filter_rt":this.$store.commit("setRtTime",n);break;case"pm2_5":this.$store.commit("setPm25",n)}}console.log(e)},writeCommand:function(t){this.commType;console.log(t);try{this.gizwitsws.write(this.curDid,t)}catch(t){console.log(t),R("数据格式错误")}},getLocalInfo:function(t){if(console.log(t),t){var e=this;e.$store.commit("startFetching"),console.log("=========获取城市信息========="),x.ajax({url:"/LSVServer/getAirInfo",data:{device:e.curDid},timeout:2e3}).done(function(t){if(0==(t=JSON.parse(t)).code){e.$store.commit("endFetching"),console.log("城市信息 => ",p()(t.data));var i=t.data;e.city_pm2_5=i.pm2_5,e.city=i.city}else e.$store.commit("endFetching",!1)}).fail(function(t){e.$store.commit("endFetching",!0),console.log(t)})}},reload:function(){window.location.reload(!0)}},mounted:function(){this.init(),this.initWx(),k.$on("sendCommond",this.writeCommand)}},z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isFetching||t.isError,expression:"isFetching || isError"}],attrs:{visible:t.isFetching}},[t.isError?i("p",{staticClass:"tips",on:{click:t.reload}},[t._v("加载失败，点击重新加载")]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFetching&&!t.isError,expression:"!isFetching && !isError"}],staticClass:"machine",attrs:{id:"machine"}},[i("div",{class:["inner-info",t.air_level]},[t.curDeviceInfo?i("h3",[t._v(t._s(t.curDeviceInfo.deviceName))]):t._e(),t._v(" "),i("span",[t._v("PM2.5")]),t._v(" "),i("em",[t._v(t._s(t.pm25))])]),t._v(" "),i("div",{staticClass:"options"},[i("span",[i("i",{class:["model_icon","on"+t.controlInfo.model.curKey]}),t._v(t._s(t.modelDes))]),t._v(" "),i("span",[i("i",{staticClass:"speed_icon"}),t._v(t._s("0"+t.controlInfo.speed.curKey))])]),t._v(" "),i("div",{staticClass:"local-info"},[i("div",{staticClass:"local"},[i("span",[i("i"),t._v(t._s(t.city))]),t._v(" "),i("span",[t._v("PM2.5")])]),t._v(" "),i("div",{staticClass:"pm"},[t._v(t._s(t.city_pm2_5))])]),t._v(" "),i("div",{staticClass:"tab-btn"},[i("span",{staticClass:"history"},[i("i",{on:{click:function(e){t.jumpFn("History")}}})]),t._v(" "),i("span",{staticClass:"ctrl"},[i("i",{on:{click:function(e){t.jumpFn("Control")}}})])]),t._v(" "),i("i",{staticClass:"manage-btn",on:{click:function(e){t.jumpFn("Manage")}}})])],1)},staticRenderFns:[]},E=i("VU/8")(N,z,!1,null,null,null).exports,j=(i("MCYK"),i("n1iR"),{name:"popup",props:{position:{type:String,default:"bottom"},visible:{type:Boolean,default:!1}},computed:{isNeedLayer:function(){return["bottom"].indexOf(this.position)>-1}},methods:{maskClickHandle:function(){console.log("popup's mask is clicked"),this.$emit("maskClickHandle")}}}),A={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"popup"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"zheui-popup",class:[t.position?"zheui-popup-"+t.position:""]},[t._t("default")],2)]),t._v(" "),i("transition",{attrs:{name:"layer"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"zheui-popup-layer",on:{click:function(e){e.stopPropagation(),t.maskClickHandle(e)}}})])],1)},staticRenderFns:[]},K=i("VU/8")(j,A,!1,null,null,null).exports,P=(i("gpgq"),{name:"dialog",data:function(){return{callByFun:!1}},props:{visible:!1,title:{type:String,default:"温馨提示"},content:{type:String,default:""},okText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},showCancel:{type:Boolean,default:!0},cbOk:{type:Function,default:function(){this.visible=!1}},cbCancel:{type:Function,default:function(){this.visible=!1}}},methods:{handleOk:function(){this.cbOk&&this.cbOk()},handleCancel:function(){this.cbCancel&&this.cbCancel()},afterLeave:function(){console.log(this.callByFun),this.callByFun&&document.getElementById("app").removeChild(this.$el)}},mounted:function(){document.body.addEventListener("touchstart",function(){})}}),W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("transition",{attrs:{name:"dialog"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"zheui-dialog-box"},[this._t("dialog-by",[e("div",{staticClass:"zheui-dialog-by"},[e("p",{staticClass:"dialog-t"},[this._v(this._s(this.title))]),this._v(" "),e("p",{staticClass:"dialog-con"},[this._v(this._s(this.content))])])]),this._v(" "),this._t("dialog-btn",[e("div",{staticClass:"dialog-btn-w"},[e("span",{staticClass:"dilog_btn_ok",on:{click:this.handleOk}},[this._v(this._s(this.okText))]),this._v(" "),this.showCancel?e("span",{staticClass:"dilog_btn_cancel",on:{click:this.handleCancel}},[this._v(this._s(this.cancelText))]):this._e()])])],2)]),this._v(" "),e("transition",{attrs:{name:"layer"},on:{"after-leave":this.afterLeave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"zheui-dialog-layer"})])],1)},staticRenderFns:[]},H=i("VU/8")(P,W,!1,null,null,null).exports,U=i("woOf"),V=i.n(U),q=null,B=s.a.extend(H),G=["title","content","okText","cancelText","showCancel","cbOk","cbCancel"],M=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cbOk:t.close,cbCancel:t.close};(q=function(){var t=t||new B({el:document.createElement("div")});return t}()).callByFun=!0,V()(q,function(t,e){var i={};return e.forEach(function(e,n){"undefined"!==t[e]&&(i[e]=t[e])}),i}(e,G)),document.getElementById("app").appendChild(q.$el),s.a.nextTick(function(){q.visible=!0})};M.close=function(){q.visible=!1},M.createOwnDialog=H;var J=M,Q={name:"manage",data:function(){return{canShow:!1,target:null}},computed:y()({},Object(o.d)(["curDid","deviceList","rtTime","totalTime","air_quality_target","wechatOpenId"]),Object(o.b)(["curDeviceInfo"]),{deviceName:function(){return this.curDeviceInfo?this.curDeviceInfo.deviceName:""},air_target:function(){return this.target?this.target:this.air_quality_target}}),components:{myPopup:K},methods:{unbind:function(t,e){var i=this;console.log(wx),J({title:"确定要解除与设定的绑定？",content:"解绑后将无法通过该账号对设备进行控制。",okText:"确定",cancelText:"再想想",showCancel:!0,cbOk:function(){console.log("is OK callback"),wx.invoke("getWXDeviceTicket",{deviceId:t,type:"2",connType:"lan"},function(n){console.log("getWXDeviceTicket",n),$.ajax({type:"POST",url:"/LSVServer/unbindDevice",data:{user:i.wechatOpenId,device:e,gizDid:t,ticket:n.ticket}}).done(function(t){t=JSON.parse(t),console.log(t),0==t.code?(R("解绑成功！"),wx.closeWindow()):R(t.message||"接口出错了~~")}).fail(function(t){console.log(t)})}),J.close()},cbCancel:function(){J.close()}})},openDeviceListFn:function(){if((this.deviceList||[])<2)return!1;this.canShow=!0},closePopUp:function(){this.canShow=!1},scanQRCode:function(){wx.scanQRCode({needResult:0,scanType:["qrCode"],success:function(t){console.log(t)}})},setAirTarget:function(t){this.target=Number(t),k.$emit("sendCommond",{air_quality_target:Number(t)})},clickItem:function(t){var e=this;t&&(this.closePopUp(),$.ajax({url:"/LSVServer/setDefaltDevice",data:{user:e.wechatOpenId,device:String(t)}}).done(function(i){0==(i=JSON.parse(i)).code?(console.log("选择设备成功！新设备为"+t),e.$store.commit("setCurDid",t)):R(i.message||"接口出错了~~")}).fail(function(t){console.log(t)}))},changeName:function(t){var e=$("#deviceName")[0].value;e?$.ajax({url:"/LSVServer/setDeviceName",type:"POST",data:{user:this.wechatOpenId,device:String(this.curDeviceInfo.mac),name:String(e)}}).done(function(t){0==(t=JSON.parse(t)).code?console.log("修改设备名称,新名称是 =>"+e):R(t.message||"接口出错了~~")}).fail(function(t){console.log(t)}):R("请输入有效名称")}}},Y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"manage",attrs:{id:"manage"}},[i("div",{staticClass:"device-select",on:{click:t.openDeviceListFn}},[i("span",{staticClass:"name"},[t._v("切换设备：")]),t._v(" "),i("span",{staticClass:"info"},[t._v(t._s(t.deviceName))]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:this.deviceList.length>1,expression:"this.deviceList.length > 1"}]})]),t._v(" "),i("ul",{staticClass:"device-info"},[i("li",{staticClass:"item"},[i("span",{staticClass:"name"},[t._v("设备名称：")]),t._v(" "),i("input",{staticClass:"info",attrs:{type:"text",name:"deviceName",id:"deviceName",maxlength:"8"},domProps:{value:t.deviceName},on:{change:function(e){t.changeName()}}})]),t._v(" "),i("li",{staticClass:"item"},[i("span",{staticClass:"name"},[t._v("空气质量：")]),t._v(" "),i("ul",{staticClass:"air-quality"},[i("li",{staticClass:"level"},[i("div",{staticClass:"sele-box"},[i("span",{class:["box-item",0==t.air_target?"on":""],on:{click:function(e){t.setAirTarget(0)}}},[i("i"),t._v("\n                            普通\n                        ")]),t._v(" "),i("span",{class:["box-item",1==t.air_target?"on":""],on:{click:function(e){t.setAirTarget(1)}}},[i("i"),t._v("\n                            较高\n                        ")]),t._v(" "),i("span",{class:["box-item",2==t.air_target?"on":""],on:{click:function(e){t.setAirTarget(2)}}},[i("i"),t._v("\n                            极高\n                        ")])])]),t._v(" "),t._m(0)])]),t._v(" "),i("li",{staticClass:"item"},[i("span",{staticClass:"name"},[t._v("运行时长：")]),t._v(" "),i("span",{staticClass:"info"},[t._v(t._s(t.totalTime))])]),t._v(" "),i("li",{staticClass:"item"},[i("span",{staticClass:"name"},[t._v("滤网寿命：")]),t._v(" "),i("span",{staticClass:"progress-o"},[i("span",{staticClass:"progress-i",style:{width:t.rtTime}}),t._v(" "),i("em",[t._v("剩余"+t._s(t.rtTime))])])])]),t._v(" "),i("div",{staticClass:"unbind-btn",on:{click:function(e){t.unbind(t.curDid,t.curDeviceInfo.mac)}}},[t._v("\n        解绑该设备\n    ")]),t._v(" "),i("div",{staticClass:"add-btn",on:{click:t.scanQRCode}},[i("i"),t._v(" "),i("span",[t._v("添加设备")])]),t._v(" "),t.deviceList.length>1?i("my-popup",{attrs:{visible:t.canShow},on:{maskClickHandle:t.closePopUp}},[i("ul",{staticClass:"sele-box"},t._l(t.deviceList,function(e,n){return i("li",{key:n,staticClass:"sele-item",on:{click:function(i){i.stopPropagation(),t.clickItem(e.did)}}},[t._v("\n                "+t._s(e.deviceName)+"\n            ")])}))]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"desc"},[e("p",[this._v("普通，保持良好的空气质量 ")]),this._v(" "),e("p",[this._v("较高，对颗粒物和污染物比较敏感")]),this._v(" "),e("p",[this._v(" 极高，对颗粒物和污染物非常敏感 ")]),this._v(" "),e("p",[this._v("空气质量目标越高，机器运行时间越长")])])}]},X=i("VU/8")(Q,Y,!1,null,null,null).exports,Z=(i("VzO7"),i("M4fF")),tt=i.n(Z),et={status:{des:"开关机",curKey:1,keys:{0:"运行中",1:"未启动"},keyDes:{0:"开机",1:"关机"}},model:{des:"模式",curKey:0,keys:{0:"智能模式",1:"手动模式",2:"夜间模式"}},speed:{des:"风速",curKey:1,keys:{1:"风速1",2:"风速2",3:"风速3",4:"风速4",5:"风速5",6:"风速6",7:"风速7",8:"风速8",9:"风速9",10:"风速10"}},time:{des:"定时",curKey:30,keys:{30:"30分钟",60:"1小时",120:"2小时",180:"3小时",240:"4小时",300:"5小时",360:"6小时",420:"7小时",480:"8小时"}}},it={status:"power_status",speed:"wind_vol",time:"left_time",model:"op_mode"},nt={name:"control-item",data:function(){return{canShow:!1}},computed:{flag:function(){return console.log("status"===this.curItem||this.isRun),"status"===this.curItem||this.isRun}},props:{data:{type:Object,required:!0},curItem:{type:String,required:!0},isRun:{type:Boolean,required:!0}},components:{myPopup:K},methods:y()({},Object(o.d)(["gizwitsws","commType"]),Object(o.c)(["setStatus","setSpeed","setModel","setTime"]),{clickHandle:function(){this.flag&&(this.canShow=!0)},closePopUp:function(){this.canShow=!1},clickItem:function(t){this["set"+tt.a.capitalize(this.curItem)](t),this.setAttr(this.curItem,t),this.closePopUp()},writeCommand:function(t){var e="attrs_v4"===this.commType?"write":"raw";try{this.gizwitsws.write(this.did,t),console.log("已对设备 "+this.did+" 发送 "+e+" 指令")}catch(t){console.log(t),console.log("数据格式错误")}},setAttr:function(t,e){var i={};it[t]&&(i[it[t]]=Number(e),k.$emit("sendCommond",i))}})},st={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"control-item",on:{click:t.clickHandle}},[i("span",{class:["icon","on"+t.data.curKey,t.isRun?"":"gray"]}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"text"},[t._v(t._s(t.data.keys[t.data.curKey]))]),t._v(" "),t.data.keys&&t.flag?i("my-popup",{attrs:{visible:t.canShow},on:{maskClickHandle:t.closePopUp}},[i("ul",{staticClass:"sele-box"},[i("li",{staticClass:"sele-item title"},[t._v(t._s("设置"+t.data.des))]),t._v(" "),t._l(t.data.keyDes||t.data.keys,function(e,n){return i("li",{key:n,staticClass:"sele-item",on:{click:function(e){e.stopPropagation(),t.clickItem(n)}}},[t._v("\n                "+t._s(e)+"\n            ")])})],2)]):t._e()],1)},staticRenderFns:[]},ot={name:"control",data:function(){return{data:et}},computed:{mergeData:function(){return tt.a.merge({},this.data,this.$store.state.controlInfo)}},components:{ControlItem:i("VU/8")(nt,st,!1,null,null,null).exports},methods:{}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control",attrs:{id:"control"}},[i("ul",{staticClass:"control-box"},t._l(t.mergeData,function(e,n){return i("control-item",{key:n,class:[n],attrs:{data:e,curItem:n,isRun:0===Number(t.mergeData.status.curKey)}})}))])},staticRenderFns:[]},ct=i("VU/8")(ot,at,!1,null,null,null).exports,lt=i("bOdI"),rt=i.n(lt),ut={name:"view",components:{IEcharts:i("Z1Ko").a},props:{},data:function(){return{loading:!1,line:{title:{text:"过去24小时室内空气质量",x:"center",y:"top",textStyle:{color:"rgba(255,255,255,.6)",fontSize:16,align:"center",fontWeight:"lighter"}},dataZoom:[{type:"slider",start:10,end:60}],tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{data:[],nameLocation:"start",nameTextStyle:{fontSize:8,color:"blue"},nameGap:-100,axisTick:{alignWithLabel:!0},axisLabel:{show:!1,interval:6,color:"#fff"},axisLine:{lineStyle:{width:4,opacity:.6}}},yAxis:rt()({axisLine:{lineStyle:{type:"dashed"}},splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1},axisPointer:{snap:!0}},"axisLine",{lineStyle:{opacity:.6}}),visualMap:{type:"piecewise",show:!1,top:10,right:10,pieces:[{gt:0,lte:50,color:"#13cc6b"},{gt:50,lte:100,color:"#8cba2a"},{gt:100,lte:200,color:"#9a4e2c"}],outOfRange:{symbol:"circle",color:"#d43637"}},series:{name:"指数",type:"line",symbol:"none",smooth:!0,lineStyle:{normal:{type:"solid"}},data:[],markLine:{silent:!0,data:[{yAxis:50},{yAxis:100},{yAxis:200},{yAxis:300}]}}}}},computed:y()({},Object(o.d)(["wechatOpenId","curDid"]),Object(o.b)(["curDeviceInfo"])),methods:{onReady:function(t){console.log(t)},getData:function(){var t=this,e=new Date,i=e.getFullYear(),n=e.getMonth()+1;console.log(this.wechatOpenId,this.curDid,this.curDeviceInfo),x.ajax({url:"/LSVServer/pm25of24Hours",type:"GET",data:{user:"oZle8vpKKB_PBNF7nQbp2lak1c3Q",device:"virtual:site",y:i,m:n,d:5,h:1},success:function(e){if(0===(e=JSON.parse(e)).code&&e.data&&e.data.list&&e.data.list.length){var i=[],n=[];e.data.list.forEach(function(t,e){i.push(t.minutes),n.push(t.pm25||"-")}),console.log(i,n),t.line.xAxis.data=i,t.line.series.data=n}},error:function(){}})}},activated:function(){this.getData()}},dt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echarts"},[e("IEcharts",{attrs:{option:this.line,loading:this.loading},on:{ready:this.onReady}})],1)},staticRenderFns:[]},mt=[{path:"/",name:"MainInfo",component:E,meta:{title:"长石河谷"}},{path:"/manage",name:"Manage",component:X,meta:{title:"设备管理"}},{path:"/control",name:"Control",component:ct,meta:{title:"设备控制"}},{path:"/history",name:"History",component:i("VU/8")(ut,dt,!1,function(t){i("PGJG")},"data-v-1055bb24",null).exports,meta:{title:"历史数据"}}];i("Lw6n");s.a.use(v.a),s.a.use(i("YqKu"));var vt=new v.a({routes:mt,mode:"hash"});new s.a({el:"#app",router:vt,store:u,render:function(t){return t(m)}})},PGJG:function(t,e){},VzO7:function(t,e){},gpgq:function(t,e){},jcZh:function(t,e){},n1iR:function(t,e){},sJGt:function(t,e){},uIYl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e00e69c191b63784321f.js.map